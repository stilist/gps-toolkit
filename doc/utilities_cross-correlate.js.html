<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: utilities/cross-correlate.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: utilities/cross-correlate.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import 'babel-polyfill'
import dot_product from './dot-product'

/**
 * Rotate `distance` members to the head of `sequence`.
 *
 * @param {number[]} sequence - The array to rotate.
 * @param {number} [distance=1] - How many members to move.
 *
 * @access private
 * @throws {TypeError}
 *
 * @todo Handle `distance > sequence.length`.
 */
function rotate_sequence(sequence, distance = 1) {
  if (!sequence.length) throw new TypeError('sequence must be an Array')
  if (typeof distance !== 'number') throw new TypeError('distance must be a Number')

  const head = sequence.slice(0, -distance)
  const tail = sequence.slice(sequence.length - distance)

  return tail.concat(head)
}

/**
 * > In signal processing, cross-correlation is a measure of similarity of two
 * > series as a function of the lag of one relative to the other.
 * >
 * > [...]
 * >
 * > In an autocorrelation, which is the cross-correlation of a signal with
 * > itself, there will always be a peak at a lag of zero, and its size will be
 * > the signal power.
 *
 * @param {number} sequenceA - The reference sequence.
 * @param {number} sequenceB - The sequence to correlate.
 * @returns {number[]} The correlation at each offset of `sequenceB`.
 *
 * @example &lt;caption>Correlating a sequence with itself (autocorrelation)&lt;/caption>
 *   cross_correlate(0b110010, 0b110010)
 *   //=> [6, -2, -2, 2, -2, -2]
 *
 * @see https://en.wikipedia.org/wiki/Cross-correlation
 */
function cross_correlate(sequenceA, sequenceB) {
  const length = Math.max(sequenceA.toString(2).length,
                          sequenceB.toString(2).length)

  // Map `sequenceB` into an `Array` so it can be rotated.
  let bitsB = []
  // @see http://stackoverflow.com/questions/14104208/convert-integer-to-binary-and-store-it-in-an-integer-array-of-specified-sizec#comment19514125_14104263
  for (let i = 0; i &lt; length; i++) bitsB[length - i] = (sequenceB >> i) &amp; 0b1

  let correlations = [dot_product(sequenceA, sequenceB, length)]
  for (let offset = 1; offset &lt; length; offset++) {
    let rotated = rotate_sequence(bitsB, offset)

    let sequence = parseInt(rotated.join(''), 2)
    let correlation = dot_product(sequenceA, sequence, length)

    correlations.push(correlation)
  }

  return correlations
}
export default cross_correlate
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="FibonacciLFSR.html">FibonacciLFSR</a></li><li><a href="GaloisLFSR.html">GaloisLFSR</a></li><li><a href="GoldCode.html">GoldCode</a></li><li><a href="LFSR.html">LFSR</a></li><li><a href="MSequence.html">MSequence</a></li></ul><h3>Global</h3><ul><li><a href="global.html#cross_correlate">cross_correlate</a></li><li><a href="global.html#dot_product">dot_product</a></li><li><a href="global.html#is_preferred_sequence">is_preferred_sequence</a></li><li><a href="global.html#population_count">population_count</a></li><li><a href="global.html#preferred_sequence_values">preferred_sequence_values</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Sun Jun 05 2016 19:11:08 GMT-0700 (PDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
